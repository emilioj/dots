(require 'package)
(add-to-list 'package-archives
             '("melpa" . "https://melpa.org/packages/"))
(add-to-list 'package-archives
             '("melpa-stable" . "https://stable.melpa.org/packages/") t)

;; Added by Package.el.  This must come before configurations of
;; installed packages.  Don't delete this line.  If you don't want it,
;; just comment it out by adding a semicolon to the start of the line.
;; You may delete these explanatory comments.
(package-initialize)

(custom-set-variables
 ;; custom-set-variables was added by Custom.
 ;; If you edit it by hand, you could mess it up, so be careful.
 ;; Your init file should contain only one such instance.
 ;; If there is more than one, they won't work right.
 '(column-number-mode t)
 '(delete-selection-mode t)
 '(frame-title-format (quote ("emacs - %b " "[%f]")) t)
 '(global-whitespace-mode t)
 '(inhibit-startup-screen t)
 '(menu-bar-mode nil)
 '(org-agenda-files (quote ("~/teaching/igm/students.org" "~/self/org")))
 '(package-selected-packages
   (quote
    (yaml-mode magit pdf-tools auctex-latexmk nov isend-mode realgud engine-mode zenburn-theme org-babel-eval-in-repl org ess auctex)))
 '(scroll-bar-mode nil)
 '(show-paren-mode t)
 '(tool-bar-mode nil)
 '(whitespace-style (quote (face empty tabs trailing lines-tail))))
(custom-set-faces
 ;; custom-set-faces was added by Custom.
 ;; If you edit it by hand, you could mess it up, so be careful.
 ;; Your init file should contain only one such instance.
 ;; If there is more than one, they won't work right.
 )

(setq-default ispell-program-name "hunspell")

(add-hook 'LaTeX-mode-hook 'auto-fill-mode)

;; Load pdf-tools when opening a pdf file
(pdf-tools-install)

;; Use pdf-tools to open PDF files
(setq TeX-view-program-selection '((output-pdf "PDF Tools"))
      TeX-source-correlate-start-server t)

;;(global-set-key "j" 'pdf-view-next-line-or-next-page)
;;(global-set-key "k" 'pdf-view-previous-line-or-previous-page)
(define-key pdf-view-mode-map (kbd "j") 'pdf-view-next-line-or-next-page)
(define-key pdf-view-mode-map (kbd "k") 'pdf-view-previous-line-or-previous-page)

;; Update PDF buffers after successful LaTeX runs
(add-hook 'TeX-after-compilation-finished-functions
           #'TeX-revert-document-buffer)

(load-theme 'zenburn t)

;; ENGINE-MODE STUFf
;; C-x / keybinding for launching the different engines

(require 'engine-mode)
(engine-mode t)

(setq engine/browser-function 'eww-browse-url)

;; Search functions prefixed with "C-x /"
;; => "C-X / s" search selection (or input) in stack overflow

(defengine duckduckgo
  "https://duckduckgo.com/?q=%s"
  :keybinding "d")

(defengine google
  "https://google.com/?q=%s"
  :keybinding "g")

(defengine stackoverlow
  "http://stackoverflow.com/search?q=%s"
  :keybinding "s")

(defengine texstackexchange
  "http://tex.stackexchange.com/search?q=%s"
  :keybinding "t")

(defengine github
  "https://github.com/search?ref=simplesearch&q=%s"
  :keybinding "h")

;; ORG-MODE STUFF

;; # Default key bindings for global org functions
(global-set-key "\C-cl" 'org-store-link)
(global-set-key "\C-ca" 'org-agenda)
(global-set-key "\C-cc" 'org-capture)
(global-set-key "\C-cb" 'org-iswitchb)

(setq org-directory "~/self/org/")
(setq org-agenda-files '("~/self/org" "~/teaching/igm/students.org" ))

;; org-capture
(setq org-default-notes-file (concat org-directory "notes.org"))

;; O-BLOG STUFF
(add-to-list 'load-path "/usr/local/src/o-blog")
(require 'o-blog)
